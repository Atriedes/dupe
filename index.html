<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chatbox</title>
    <link rel="stylesheet" href="css/app.css">
</head>
<body class="body">
    <div class="wrapper">
        <div class="chatbox">
            <div class="chat-topic fixed">
                <p class="topic">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dignissimos culpa illum incidunt hic et tempore ea velit maxime.</p>
            </div>
            <div class="scrollable">
                <div class="chat chat-pre">
                    <span class="name"></span>
                    <pre class="content">██████████████████████████████████████████████████████████████████████████
██████████████████████████▓▓▓▓▓▓▓▓▓▓▓▓▓▓██████████████████████████████████
█████████████████████▓▓▓▓▒▒▒▒▒░░░░░░▒▒▒▓▓▓████████████████████████████████
██████████████████▓▓▓▓▒▒▒░░░      ░░░░░░░▒▓▓▓█████████████████████████████
███████████████▓▓▓▓▒▒▒░░░               ░░░▒▒▓▓▓██████████████████████████
████████████▓▓▓▓▒▒▒░░░░                    ░░░▒▒▓▓████████████████████████
███████████▓▓▓▒▒▒▒░░░                        ░░░▒▒▓▓▓█████████████████████
██████████▓▒▒▒░░░░                              ░░▒▒▓▓▓███████████████████
█████████▓▒▒░░░░                                   ░▒▒▓▓██████████████████
████████▓▒▒▒░                                ▄██▄   ░▒▒▒▓█████████████████
███████▓▒▒░░         ▄▄▄▄                   ▐░░░░▄   ░░▒▓█████████████████
█████▓▓▒▒░░       ▄▄█░░░░█                   ██▓░░▌    ▒▓▓████████████████
█████▓▒▒░░       ▄▓▓░░░░░▒█▄                 ███░░▌    ░▒▓▓▓██████████████
████▓▓▒░░       ▐▓░░░▓▓▓░░▒▒▄                 ██░░▌     ░▒▓▓██████████████
████▓▒▒░        █░░░▓████░░░░▌                 ░░▌      ░▒▒▓▓█████████████
██▓▓▒▒░        ▐░░░░██▄██░░░▓▌                 ▀▀        ░▒▒▓█████████████
██▓▒▒░░         █░░░░███░░▒▒▀                            ░░▒▒▓████████████
██▓▒▒░          ▐▒░░░░░░░░█▀             ██               ░░▒▓▓███████████
█▓▓▒░░           ▀▀█░░░█▀▀               ███               ░▒▒▓███████████
█▓▒░░               ▀▀▀                 ░█▓█               ░▒▒▓▓██████████
█▓▒░░                                   ▓█▓█▌               ░▒▒▓██████████
█▓▒░                                   ░██▓██               ░▒▒▓██████████
█▓▒░                                  ░█▓▓▓▓█    ▄          ░░▒▓██████████
█▓▒░                                ░▓███▓▓▓█████▀           ░▒▓██████████
▓▓▒░                     ▄     ░░▓█████▒██▓▓▓█░█             ░▒▓██████████
▓▒▒                       █████████▒▒▒▒▒░█▓▓▓█▀              ░▒▓██████████
▓▒░                        ██▓░░░░░░▒▒▒░░█▓▓██               ░▒▓██████████
▓▒▒                         ▀██░░░░░░▒░░░█▓▓█▌               ░▒▓▓█████████
▓▓▒                           ███░░░░░░░░░███                ░▒▒▓█████████
█▓▒░                           ▀██▒░░░░░░░░▒█                 ░▒▓█████████
█▓▒░                             ▀██▓░░░░░░░█▌                ░▒▓█████████
█▓▒░                               ▀██▓░░░░▒█▌                ░▒▓█████████
█▓▒░                                 ██▓▒░▒▓█▌                ░▒▓█████████
█▓▒░                                   ▀████▀                 ░▒▓▓████████
█▓▒▒░                                                          ▒▒▓████████
█▓▒▒░                                                          ░▒▓████████
█▓▓▒░                                                          ░▒▓████████
██▓▒░                                                          ░▒▓▓▓██████
██▓▒▒░                                                         ░▒▒▒▓██████
██▓▓▒▒                                                          ░░▒▓██████
██▓▓▓▒░                                                          ░▒▓██████
████▓▒░                                                          ░▒▓██████
████▓▒░                                                          ░▒▓▓█████
████▓▒░                                                          ░▒▒▓█████
████▓▒░                                                           ░▒▓▓▓███
████▓▒░                                                           ░▒▒▒▓███
████▓▒░                                                            ▒▒▒▓▓██</pre>
                </div>
                <div class="chat chat-highlight">
                    <span class="timestamp">2014-10-21 08:53:57</span>
                    <span class="text">xasdjsdsadnsadlkasmdalskdasjdhasduhasd</span>
                </div>
                <div class="chat chat-normal">
                    <span class="timestamp">2014-10-21 08:53:57</span>
                    <span class="section"><a href="#">[XXX-IMGSET]</a></span>
                    <span class="release">Twin.Peaks.S01E09.FINAL.SPANiSH.BDRip.x264-FCC</span>
                    <span class="download"><a href="#">[DL]</a></span>
                    <span class="info">625.0MB</span>
                </div>
                <div class="chat chat-normal">
                    <span class="timestamp">2014-10-21 08:52:28</span>
                    <span class="section"><a href="#">[XXX-IMGSET]</a></span>
                    <span class="release">AllOver30.com_14.10.21.Sarah.Shevon.XXX.iMAGESET-YAPG</span>
                    <span class="download"><a href="#">[DL]</a></span>
                    <span class="info">322.0MB</span>
                </div>
                <div class="chat chat-notice">
                    <span class="timestamp">2014-10-21 08:53:57</span>
                    <span class="text">xasdjsdsadnsadlkasmdalskdasjdhasduhasd</span>
                </div>
            </div>
            <div class="input-box fixed">
                <div class="input-wrapper">
                    <div class="chat-input">
                        <div class="input-name">
                            <span class="name">Query</span>
                        </div>
                        <div class="input-controls">
                            <input id="query" type="text">
                        </div>
                        <div class="input-controls">
                            <input id="query-btn" type="submit" value="Submit">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script src="bower_components/jquery/dist/jquery.min.js"></script>
<script>
$(document).ready(function() {
  $(window).scrollTop($(".scrollable").get(0).scrollHeight);
});
$("#query-btn").click(function() {
  $.post("http://localhost:8080/request", {query : $("#query").val()}, function (data) {
    $.each(data, function(key, value){
      $(".scrollable")
      .find(".chat")
      .end()
      .append("<div class='chat chat-normal'><span class='timestamp'>"+ value.date +"</span> <span class='section'>"+ value.section +"</span> <span class='release'>"+ value.title +"</span></div>");
      $(window).scrollTop($(".scrollable").get(0).scrollHeight);
    });
  }, "json")
  .fail(function ($xhr) {
    var data = $xhr.responseJSON;
    $(".scrollable")
    .find(".chat")
    .end()
    .append("<div class='chat chat-notice'><span class='text'>"+ data.message +"</span></div>");
    $(window).scrollTop($(".scrollable").get(0).scrollHeight);
  });
  return false;
});
</script>
</html>
